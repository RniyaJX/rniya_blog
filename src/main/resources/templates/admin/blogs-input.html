<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>RniyaBook</title>
    <link rel="stylesheet" href="../../static/lib/layui/css/layui.css" th:href="@{/lib/layui/css/layui.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap-switch/4.0.0-alpha.1/css/bootstrap-switch.min.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="../../static/css/me.css" th:href="@{/css/me.css}">
    <link rel="stylesheet" href="../../static/css/blog/footer.css" th:href="@{/css/blog/footer.css}">
    <link rel="stylesheet" href="../../static/css/admin/admin.css" th:href="@{/css/admin/admin.css}">
    <link rel="stylesheet" href="../../static/lib/editormd/css/editormd.min.css" type="text/css" th:href="@{/lib/editormd/css/editormd.min.css}">
</head>
<body>
<!--    å¯¼èˆªæ -->
<nav th:replace="admin/_fragments :: menu(1)"
     class="navbar navbar-expand-lg fixed-top navbar-light bg-light shadow p-1 mb-5 bg-white" id="nav_top">
    <div class="container-lg row justify-content-between">
        <div class="col-md col offset-md-1 offset-1">
            <a class="navbar-brand md-0 h1" href="#" style="font-size:30px;">RniyaBook</a>
        </div>
        <div class="col-md-7 h6 offset-11">
            <div class="collapse navbar-collapse" id="navbarSupportedContent" style="padding-top: 0.5em">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link " href="#">
                            <strong><span class="layui-icon layui-icon-home "></span>&nbsp;åšå®¢ç®¡ç†</strong>
                        </a>
                    </li>
                    <li class="nav-item m-margin-small">
                        <a class="nav-link " href="#">
                            <strong><span class="layui-icon layui-icon-note"></span>&nbsp;æ ‡ç­¾ç®¡ç†</strong>
                        </a>
                    </li>
                    <li class="nav-item m-margin-small">
                        <a class="nav-link " href="#">
                            <strong><span class="layui-icon layui-icon-tabs"></span>&nbsp;ç•™è¨€åˆ—è¡¨</strong>
                        </a>
                    </li>
                    <li class="nav-item m-margin-small">
                        <a class="nav-link " href="#">
                            <strong><span class="layui-icon layui-icon-link"></span>&nbsp;æ·»åŠ å‹é“¾</strong>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<div class="container">
    <div class="blog-markdown">
        <form id="blogContent" th:object="${blog}"
              th:action="*{id}==null ? @{/admin/blogs/input} : @{/admin/blogs/{id}/update(id=*{id})}" method="post">
            <input type="hidden" name="published" th:value="*{published}">
            <input type="hidden" name="id" th:value="*{id}">
            <div class="input-group mb-3 blog-title">
                <div class="input-group-prepend">
                    <select class="custom-select" id="flag" name="flag" th:value="*{flag == null ? 'åŸåˆ›':flag}">
                        <option selected>åŸåˆ›</option>
                        <option value="ç¿»è¯‘">ç¿»è¯‘</option>
                        <option value="è½¬è½½">è½¬è½½</option>
                    </select>
                </div>
                <input type="text" name="title" class="form-control" aria-label="Text input with dropdown button"
                       placeholder="è¯·è¾“å…¥æ ‡é¢˜..." th:value="*{title}">
            </div>
            <div class="required field">
                <div id="md-content" style="z-index: 1 !important;">
                    <textarea placeholder="åšå®¢å†…å®¹" th:text="*{content}" name="content"
                              style="display: none"></textarea>
                </div>
            </div>
            <div class="required field">
                <div style="width: 95%; margin-left: 2.5%;margin-right: 2.5%">
                    <textarea class="form-control" rows="3" placeholder="åšå®¢æè¿°..." th:text="*{description}"
                              id="description" name="description"></textarea>
                </div>
            </div>
            <div class="input-group mb-3 blog-img">
                <div class="input-group-prepend">
                    <span class="input-group-text">é¦–å›¾</span>
                </div>
                <input type="text" class="form-control" th:value="*{firstPicture}" id="firstPicture"
                       name="firstPicture">
                <div style="width: 10%"></div>
                <div class="input-group-prepend">
                    <span class="input-group-text">æ ‡ç­¾</span>
                </div>
                <select class="dropdown form-control clearfix selectpicker border" multiple data-live-search="true"
                        data-size="5" name="tagIds" id="tagIds" required>
                    <option th:each="tag:${tags}" th:data-value="${tag.tagId}" th:text="${tag.tagId}"
                            th:data-content="|<span class='badge badge-info'>${tag.tagName}</span>|">Spring
                    </option>
                </select>
            </div>
            <div class="required field" style="margin-bottom: 1em;">
                <div style="width: 95%; margin-left: 2.5%;margin-right: 2.5%;" class="clearfix">
                    <div class="custom-control custom-switch" style="display: inline">
                        <input type="checkbox" class="custom-control-input" id="commentable" name="commentable"
                               th:checked="*{commentable}">
                        <label class="custom-control-label" for="commentable">è¯„è®º</label>
                    </div>
                    <div class="custom-control custom-switch" style="display: inline">
                        <input type="checkbox" class="custom-control-input" id="recommend" name="recommend"
                               th:checked="*{recommend}">
                        <label class="custom-control-label" for="recommend">æ¨è</label>
                    </div>
                    <div class="custom-control custom-switch" style="display: inline">
                        <input type="checkbox" class="custom-control-input" id="shareStatement" name="shareStatement"
                               th:checked="*{shareStatement}">
                        <label class="custom-control-label" for="shareStatement">è½¬è½½å£°æ˜</label>
                    </div>
                    <div style="display: inline;" class="float-right">
                        <button class="btn btn-success" id="save">ä¿å­˜</button>
                        <button class="btn btn-primary" id="publish">å‘å¸ƒ</button>
                        <a th:href="@{/admin/blogs}" class="btn btn-secondary" onclick="window.history.go(-1)">è¿”å›</a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<!--åº•éƒ¨å†…å®¹-->
<footer class="mainfooter" role="contentinfo" style="position:relative; top: 11em;">
    <div class="footer-middle">
        <div class="container">
            <div class="row">
            </div>
            <div class="row">
                <div class="col-md-12 copy">
                    <p class="text-center"><span class="h4">ğŸ™‚</span></p>
                    <p class="text-center">æ„Ÿè°¢æ‚¨æµè§ˆæˆ‘çš„åšå®¢</p>
                    <p class="text-center">Thanks for your browsing</p>
                </div>
            </div>
        </div>
    </div>
</footer>
<div>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.scrollto@2.1.2/jquery.scrollTo.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../static/lib/layui/layui.js" th:src="@{/lib/layui/layui.js}"></script>
    <script src="https://cdn.bootcss.com/bootstrap-switch/4.0.0-alpha.1/js/bootstrap-switch.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/i18n/defaults-zh_CN.min.js"></script>
    <script src="../../static/lib/editormd/editormd.min.js" type="text/javascript" th:src="@{/lib/editormd/editormd.min.js}"></script>
</div>
<script>
    // åˆå§‹åŒ–mackdownç¼–è¾‘å™¨
    var contentEditor;
    $(function () {
        contentEditor = editormd("md-content", {
            width: "95%",
            height: 640,
            syncScrolling: "single",
            // path    : "../static/lib/editormd/lib/"
            path: "/lib/editormd/lib/",
            theme: "dark",
            previewTheme: "dark",
            editorTheme: "pastel-on-dark",
            // markdown : md-content,
            // codeFold : true,
            // //syncScrolling : false,
            // saveHTMLToTextarea : true,    // ä¿å­˜ HTML åˆ° Textarea
            // searchReplace : true,
            // //watch : false,                // å…³é—­å®æ—¶é¢„è§ˆ
            htmlDecode: "style,script,iframe|on*",            // å¼€å¯ HTML æ ‡ç­¾è§£æï¼Œä¸ºäº†å®‰å…¨æ€§ï¼Œé»˜è®¤ä¸å¼€å¯
            // //toolbar  : false,             //å…³é—­å·¥å…·æ 
            // //previewCodeHighlight : false, // å…³é—­é¢„è§ˆ HTML çš„ä»£ç å—é«˜äº®ï¼Œé»˜è®¤å¼€å¯
            // emoji : true,
            // taskList : true,
            tocm: true,         // Using [TOCM]
            tex: true,                   // å¼€å¯ç§‘å­¦å…¬å¼TeXè¯­è¨€æ”¯æŒï¼Œé»˜è®¤å…³é—­
            flowChart: true,             // å¼€å¯æµç¨‹å›¾æ”¯æŒï¼Œé»˜è®¤å…³é—­
            sequenceDiagram: true,       // å¼€å¯æ—¶åº/åºåˆ—å›¾æ”¯æŒï¼Œé»˜è®¤å…³é—­,
            // //dialogLockScreen : false,   // è®¾ç½®å¼¹å‡ºå±‚å¯¹è¯æ¡†ä¸é”å±ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸ºtrue
            // //dialogShowMask : false,     // è®¾ç½®å¼¹å‡ºå±‚å¯¹è¯æ¡†æ˜¾ç¤ºé€æ˜é®ç½©å±‚ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸ºtrue
            // //dialogDraggable : false,    // è®¾ç½®å¼¹å‡ºå±‚å¯¹è¯æ¡†ä¸å¯æ‹–åŠ¨ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸ºtrue
            // //dialogMaskOpacity : 0.4,    // è®¾ç½®é€æ˜é®ç½©å±‚çš„é€æ˜åº¦ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤å€¼ä¸º0.1
            // //dialogMaskBgColor : "#000", // è®¾ç½®é€æ˜é®ç½©å±‚çš„èƒŒæ™¯é¢œè‰²ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸º#fff
            // imageUpload : true,
            // imageFormats : ["jpg", "jpeg", "gif", "png", "bmp", "webp"]
        });
    });


    $('#save').click(function () {
        $('[name="published"]').val(false);
        $('#blog-form').submit();
    });

    $('#publish').click(function () {
        $('[name="published"]').val(true);
        $('#blog-form').submit();
    });

</script>

</body>
</html>
